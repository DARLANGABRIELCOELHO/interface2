<!DOCTYPE html>
<html lang="pt-br" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema de gestão para assistência técnica iFix - Gerencie clientes, ordens de serviço e cotações">
    <meta name="author" content="iFix Assistência Técnica">
    <meta name="theme-color" content="#6a5acd">
    
    <title>iFix - Sistema de Gestão para Assistência Técnica</title>
    
    <!-- CSS Externo -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body class="app-loading">
    <!-- Sidebar (injetado pelo JS) -->
    <aside id="sidebar"></aside>
    
    <!-- Overlay para menu mobile -->
    <div class="sidebar-overlay"></div>
    
    <!-- Conteúdo principal -->
    <main id="main-content">
        <!-- Header com toggle de menu mobile -->
        <header class="d-none d-flex align-items-center justify-content-between p-3 border-bottom">
            <button class="btn btn-icon mobile-menu-toggle" aria-label="Abrir menu">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="d-flex align-items-center gap-3">
                <button id="theme-toggle" class="btn btn-icon" aria-label="Alternar tema">
                    <i class="fas fa-moon"></i>
                </button>
                
                <div class="dropdown">
                    <button class="btn btn-icon" aria-label="Menu do usuário">
                        <i class="fas fa-user-circle"></i>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Área de conteúdo dos módulos -->
        <div class="content-area">
            <!-- Dashboard -->
            <div id="dashboard-view" class="module-container" role="region" aria-label="Painel de controle"></div>
            
            <!-- Clientes -->
            <div id="customers-view" class="module-container" role="region" aria-label="Gestão de clientes"></div>
            
            <!-- Ordens de Serviço -->
            <div id="orders-view" class="module-container" role="region" aria-label="Ordens de serviço"></div>
            
            <!-- Calculadora de Preços -->
            <div id="calculator-view" class="module-container" role="region" aria-label="Calculadora de preços"></div>
            
            <!-- Catálogo -->
            <div id="catalog-view" class="module-container" role="region" aria-label="Catálogo de serviços"></div>
        </div>
    </main>
    
    <!-- Modal global -->
    <div id="global-modal" class="modal" role="dialog" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"></h3>
                <button class="modal-close" aria-label="Fechar modal">×</button>
            </div>
            <div class="modal-body"></div>
            <div class="modal-footer"></div>
        </div>
    </div>
    
    <!-- Container para notificações -->
    <div id="notifications-container" class="notifications" role="alert" aria-live="polite"></div>
    
    <!-- Loading overlay -->
    <div id="loading-overlay" class="modal" style="display: none;">
        <div class="modal-content" style="background: transparent; border: none; box-shadow: none;">
            <div class="text-center">
                <div class="spinner" style="width: 40px; height: 40px; border: 3px solid var(--border); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
                <p class="mt-3" style="color: white;">Carregando...</p>
            </div>
        </div>
    </div>

    <!-- Scripts - Ordem de carregamento CRÍTICA -->
    
    <!-- 1. Camada de Dados -->
    <script src="data/connection_DB.js"></script>
    <script src="data/catalog_DB.js"></script>
    <script src="data/Customers_DB.js"></script>
    <script src="data/Orders_DB.js"></script>

    <!-- 2. Módulos da aplicação -->
    <script src="modules/sidebar.js"></script>
    <script src="modules/dashboard.js"></script>
    <script src="modules/Customers.js"></script>
    <script src="modules/serviceOrders.js"></script>
    <script src="modules/PriceCalculator.js"></script>
    <script src="modules/serviceCatalog.js"></script>

    <!-- 3. Aplicação Principal -->
    <script src="app.js"></script>

    <!-- 4. Inicializador (Gatilho Final) -->
    <script src="init.js"></script>
</body>
</html>